<!DOCTYPE html>
<html>
<head>
    <title>Haskulator</title>
    <link rel="stylesheet" type="text/css" href="styles.css">
    <style>
        .hidden {
            display: none;
        }
    </style>
</head>

<!--Start of HTML-->
<!--Ignore <ul> <li> <div> tags, those are for formatting only-->
<!--<form> <label> <input> are the important tags-->
<body>
    <div class="title-bar">
        <h1 class="title-container">Welcome to Haskulator</h1>
    </div>
    <div class="choose-container">
        <h3 class="choose-div">Please choose a calculation:</h3>
    </div>
    <div id="optionsDiv" class="options-selector"></div>

    <!--Acceleration HTML-->
    <div id="Acceleration" class="hidden">
        <h2>Acceleration</h2>
        <form id="acceleration-form">
            <ul>
                <li>
                    <div class="inputTitle">
                        <label for="initialVelocity">Initial Velocity: </label>
                    </div>
                    <div class="inputText">
                        <input type="number" id="initialVelocity" step="0.01" required class="inputBox">
                    </div>
                </li>
                <li>
                    <div class="inputTitle">
                        <label for="finalVelocity">Final Velocity: </label>
                    </div>
                    <div class="inputText">
                        <input type="number" id="finalVelocity" step="0.01" required class="inputBox">
                    </div>
                </li>
                <li>
                    <div class="inputTitle">
                        <label for="time">Time: </label>
                    </div>
                    <div class="inputText">
                        <input type="number" id="time" step="0.01" required class="inputBox">
                    </div>
                </li>
                <li>
                    <div>
                        <button type="button" id="calculateAcceleration" class="submitBtn">Calculate Acceleration</button>
                    </div>
                </li>
            </ul>
        </form>
        <div id="accelerationResult">
            <h3>Result: </h3>
            <p id="resultValue"></p>
        </div>
    </div>

    <!--Displacement HTML-->
    <div id="Displacement" class="hidden">
        <h2>Displacement</h2>
        <form id="displacement-form">
            <ul>
                <li>
                    <div class="inputTitle">
                        <label for="initialPosition">Initial Position: </label>
                    </div>
                    <div class="inputText">
                        <input type="number" id="initialPosition" step="0.01" required class="inputBox">
                    </div>
                </li>
                <li>
                    <div class="inputTitle">
                        <label for="finalPosition">Final Position: </label>
                    </div>
                    <div class="inputText">
                        <input type="number" id="finalPosition" step="0.01" required class="inputBox">
                    </div>
                </li>
                <li>
                    <div>
                        <button type="button" id="calculateDisplacement" class="submitBtn">Calculate Displacement</button>
                    </div>
                </li>
            </ul>
        </form>
        <div id="displacementResult">
            <h3>Result: </h3>
            <p id="resultValue"></p>
        </div>
    </div>

    <!--Momentum HTML-->
    <div id="Momentum" class="hidden">
        <h2>Momentum</h2>
        <form id="momentum-form">
            <ul>
                <li>
                    <div class="inputTitle">
                        <label for="mass">Mass: </label>
                    </div>
                    <div class="inputText">
                        <input type="number" id="mass" step="0.01" required class="inputBox">
                    </div>
                </li>
                <li>
                    <div class="inputTitle">
                        <label for="velocity">Velocity: </label>
                    </div>
                    <div class="inputText">
                        <input type="number" id="velocity" step="0.01" required class="inputBox">
                    </div>
                </li>
                <li>
                    <div>
                        <button type="button" id="calculateMomentum" class="submitBtn">Calculate Momentum</button>
                    </div>
                </li>
            </ul>
        </form>
        <div id="momentumResult">
            <h3>Result: </h3>
            <p id="resultValue"></p>
        </div>
    </div>

    <!--Velocity HTML-->
    <div id="Velocity" class="hidden">
        <h2>Velocity</h2>
        <form id="velocity-form">
            <ul>
                <li>
                    <div class="inputTitle">
                        <label for="displacement">Displacement (m): </label>
                    </div>
                    <div class="inputText">
                        <input type="number" id="displacement" step="0.01" required class="inputBox">
                    </div>
                </li>
                <li>
                    <div class="inputTitle">
                        <label for="timeVelocity">Time: </label>
                    </div>
                    <div class="inputText">
                        <input type="number" id="timeVelocity" step="0.01" required class="inputBox">
                    </div>
                </li>
                <li>
                    <div>
                        <button type="button" id="calculateVelocity" class="submitBtn">Calculate Velocity</button>
                    </div>
                </li>
            </ul>
        </form>
        <div id="velocityResult">
            <h3>Result: </h3>
            <p id="resultValue"></p>
        </div>
    </div>

    <!--End of HTML, Start of Javascript-->

    <script>
        function showDiv(divId) {
            document.getElementById(divId).style.display = 'block';
            hideOtherDivs(divId);
        }
        
        function hideOtherDivs(currentDivId) {
            const divIds = ['Acceleration', 'Displacement', 'Momentum', 'Velocity'];
            for (const id of divIds) {
                if (id !== currentDivId) {
                    document.getElementById(id).style.display = 'none';
                }
            }
        }
        // Load available problem categories from the server.
        fetch("http://localhost:3000/categories")
        .then(response => response.json())
        .then(data => {
            const optionDiv = document.getElementById("optionDiv");

            data.forEach(category => {
            const radioBtn = document.createElement("input");
            radioBtn.type = "radio";
            radioBtn.name = "btn"
            radioBtn.value = category.categoryName;
            radioBtn.textContent = category.categoryName;
            radioBtn.onclick = () =>{
                showDiv(category.categoryName)
            };
            // Add class for CSS
            radioBtn.classList.add("radioButton");
            
            const label = document.createElement("label");
            label.appendChild(radioBtn);
            label.appendChild(document.createTextNode(category.categoryName));
            // Add class for CSS
            label.classList.add("radioButtonText");

            optionsDiv.appendChild(label);
            });

         })
        .catch(error => console.error("Error:", error));
        async function calculatePhysics(category, data) {
            try {
                const response = await fetch(`http://localhost:3000/calculate/${category}`, {
                    method: 'POST',
                    body: JSON.stringify(data),
                });

                if (response.ok) {
                    const result = await response.json();
                
                   console.log(result);
                } else {
                    console.error('Calculation failed:', response.statusText);
                }
            } catch (error) {
                console.error('Error:', error);
            }
        }

        // Acceleration Event Listener
        document.getElementById("calculateAcceleration").addEventListener("click", function() {
            const initialVelocity = parseFloat(document.getElementById("initialVelocity").value);
            const finalVelocity = parseFloat(document.getElementById("finalVelocity").value);
            const time = parseFloat(document.getElementById("time").value);

            if (!isNaN(initialVelocity) && !isNaN(finalVelocity) && !isNaN(time)) {
                const data = {
                    initialVelocity: initialVelocity,
                    finalVelocity: finalVelocity,
                    time: time
                };

                // POST
                calculatePhysics("Acceleration", data);
            } else {
                alert("Please enter valid numbers!")
            }
        });

        // Displacement Event Listener
        document.getElementById("calculateDisplacement").addEventListener("click", function() {
            const initialPosition = parseFloat(document.getElementById("initialPosition").value);
            const finalPosition = parseFloat(document.getElementById("finalPosition").value);

            if (!isNaN(initialPosition) && !isNaN(finalPosition)) {
                const data = {
                    initialPosition: initialPosition,
                    finalPosition: finalPosition
                };

                // POST
                calculatePhysics("Displacement", data);
            } else {
                alert("Please enter valid numbers!")
            }
        });

        // Momentum Event Listener
        document.getElementById("calculateMomentum").addEventListener("click", function() {
            const mass = parseFloat(document.getElementById("mass").value);
            const velocity = parseFloat(document.getElementById("velocity").value);

            if (!isNaN(mass) && !isNaN(velocity)) {
                const data = {
                    mass: mass,
                    velocity: velocity
                };

                // POST
                calculatePhysics("Momentum", data);
            } else {
                alert("Please enter valid numbers!")
            }
        });

        // Velocity Event Listener
        document.getElementById("calculateVelocity").addEventListener("click", function() {
            const displacement = parseFloat(document.getElementById("displacement").value);
            const timeVelocity = parseFloat(document.getElementById("timeVelocity").value);

            if (!isNaN(displacement) && !isNaN(timeVelocity)) {
                const data = {
                    displacement: displacement,
                    timeVelocity: timeVelocity
                };

                // POST
                calculatePhysics("Velocity", data);
            } else {
                alert("Please enter valid numbers!")
            }
        });
    </script>

    <!--End of Javascript-->
</body>
</html>
